<!doctype html>
<html>
	<head>
		<meta charset='utf-8'/>
		<title>Example Mansory + Infinite Scroll</title>
		<script type='text/javascript' src='../../scripts/vendor/jquery-1.11.1.min.js'></script>
		<script type='text/javascript' src='../../scripts/vendor/jquery-migrate-1.2.1.js'></script>
		<script type='text/javascript' src='../../scripts/vendor/jquery.infinitescroll.min.js'></script>
		<script type='text/javascript' src='../../scripts/vendor/masonry.pkgd.min.js'></script>
		<script type='text/javascript' src='../../scripts/vendor/imagesloaded.pkgd.min.js'></script>
		<style type='text/css'>
		.gallery-grid { width: 800px; margin: auto; display: none; }
		.gallery-grid .item { width: 25%; font-size: 0px; padding: 4px; box-sizing: border-box; }
		.gallery-grid .item img { width: 100%; }
		#infscr-loading {
			width: 100% !important;
			text-align: center;
			position: absolute;
			bottom: 0;
		}
		</style>
	</head>
	<body>
		<div class='gallery-grid'>
			<div class='item'><img src='http://placehold.it/400x300'/></div>
			<div class='item'><img src='http://placehold.it/300x400'/></div>
			<div class='item'><img src='http://placehold.it/480x360'/></div>
			<div class='item'><img src='http://placehold.it/480x320'/></div>
			<div class='item'><img src='http://placehold.it/240x360'/></div>
			<div class='item'><img src='http://placehold.it/300x360'/></div>
			<div class='item'><img src='http://placehold.it/400x360'/></div>
			<div class='item'><img src='http://placehold.it/400x300'/></div>
			<div class='item'><img src='http://placehold.it/400x300'/></div>
			<div class='item'><img src='http://placehold.it/300x400'/></div>
			<div class='item'><img src='http://placehold.it/480x360'/></div>
			<div class='item'><img src='http://placehold.it/480x320'/></div>
			<div class='item'><img src='http://placehold.it/240x360'/></div>
			<div class='item'><img src='http://placehold.it/300x360'/></div>
			<div class='item'><img src='http://placehold.it/400x360'/></div>
			<div class='item'><img src='http://placehold.it/400x300'/></div>
			<nav id="page-nav"><a href="page-2.html"></a></nav>
		</div>
		<script type='text/javascript'>

		$(function() {

			window.onload = function() {

				var container = $('.gallery-grid');

				container.show().masonry({
					itemSelector: '.item',
					columnWidth: '.item',
					percentPosition: true
				});

				container.infinitescroll(
				{
					navSelector: '#page-nav',
					nextSelector: '#page-nav a',
					itemSelector: '.gallery-grid .item',
					loading: {
						msgText: '',
						img: '../../assets/imgs/loading.gif',
						finishedMsg: ''
					}
				},
				function( newElements ) {
					var newElems = $( newElements ).css({ opacity: 0 });
					newElems.imagesLoaded(function(){
						newElems.animate({ opacity: 1 });
						container.masonry( 'appended', newElems, true );
					});
				}
				); 

			}

		});

		</script>
	</body>
</html>
